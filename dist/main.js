!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rest_api=t():e.rest_api=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)r.d(n,u,function(t){return e[t]}.bind(null,u));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,n,u,a,o){try{var s=e[a](o),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,u)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(u,a){var o=e.apply(t,r);function s(e){n(o,u,a,s,i,"next",e)}function i(e){n(o,u,a,s,i,"throw",e)}s(void 0)}))}}r.r(t);var a=function(e){return o.apply(this,arguments)};function o(){return(o=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t.url,{method:t.method,headers:new Headers(t.headers),body:t.data}).then((function(e){return s(e).then((function(r){var n={};if("function"==typeof Headers.prototype.forEach)e.headers.forEach((function(e,t){n[t]=e}));else if("function"==typeof Headers.prototype.keys){var u=e.headers.keys(),a=!0,o=!1,s=void 0;try{for(var i,c=u[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var h=i.value;n[h]=e.headers.get(h)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}else n=e.headers;var l={data:r,headers:n,method:t.method.toLowerCase(),statusCode:e.status};if(e.status>=200&&e.status<300)return l;var d=new Error(e.statusText);throw d.response=l,d}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=function(e){return e.text().then((function(e){try{return JSON.parse(e)}catch(t){return e}}))};function i(e,t,r,n,u,a,o){try{var s=e[a](o),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,u)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,u){var a=e.apply(t,r);function o(e){i(a,n,u,o,s,"next",e)}function s(e){i(a,n,u,o,s,"throw",e)}o(void 0)}))}}function h(){return(h=c(regeneratorRuntime.mark((function e(t,r){var n,u,o,s,i,c,h,d,f,p,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,u=t.method,o=void 0===u?"GET":u,s=t.headers,i=t.data,c=t.params,h=r.requestInterceptors,d=void 0===h?[]:h,f=r.responseInterceptors,void 0===f?[]:f,p=r.errorInterceptors,void 0===p?[]:p,(v=l(d,{headers:s,url:n,method:o,data:i,params:c})).data="string"==typeof i?i:JSON.stringify(i),e.next=6,a(v);case 6:return m=e.sent,e.abrupt("return",m);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){var r=t.headers,n=t.url,u=t.method,a=t.data,o=t.params,s=r,i=n,c=u,h=a,l=o;return e.forEach((function(e){var t,r,n,u,a,o=e({data:h,params:l,headers:s,url:i,method:c});s=null!==(t=o.headers)&&void 0!==t?t:s,i=null!==(r=o.url)&&void 0!==r?r:i,c=null!==(n=o.method)&&void 0!==n?n:c,h=null!==(u=o.data)&&void 0!==u?u:h,l=null!==(a=o.params)&&void 0!==a?a:l})),{headers:s,url:i,method:c,data:h,params:l}}function d(e,t,r,n,u,a,o){try{var s=e[a](o),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,u)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,u){var a=e.apply(t,r);function o(e){d(a,n,u,o,s,"next",e)}function s(e){d(a,n,u,o,s,"throw",e)}o(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];p(this,e),this.baseUrl=t,this.subUrl=n,this.requestInterceptors=u,this.headers=r}var t,r,n,u,a,o,s,i,c;return t=e,(r=[{key:"addRequestInterceptor",value:function(e){this.requestInterceptors.push(e)}},{key:"get",value:(c=f(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doRequest({headers:this.headers,url:this.baseUrl+this.subUrl+"/"+t,method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"getAll",value:(i=f(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._doRequest({headers:this.headers,url:this.baseUrl+this.subUrl,method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"post",value:(s=f(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this._doRequest({headers:this.headers,url:this.baseUrl+this.subUrl,method:"POST",data:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"put",value:(o=f(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this._doRequest({headers:this.headers,url:this.baseUrl+this.subUrl+"/"+t,method:"PUT",data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"patch",value:(a=f(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this._doRequest({headers:this.headers,url:this.baseUrl+this.subUrl+"/"+t,method:"PATCH",data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"delete",value:(u=f(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this._doRequest({headers:this.headers,url:this.baseUrl+this.subUrl+"/"+t,method:"DELETE",data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"all",value:function(t){var r=this.subUrl+this._normalizeSubUrl(t);return new e(this.baseUrl,this.headers,r,this.requestInterceptors)}},{key:"one",value:function(t,r){var n=this.subUrl+this._normalizeSubUrl(t)+"/"+r;return new e(this.baseUrl,this.headers,n,this.requestInterceptors)}},{key:"_doRequest",value:function(e){return function(e,t){return h.apply(this,arguments)}(e,{requestInterceptors:this.requestInterceptors})}},{key:"_normalizeSubUrl",value:function(e){return"/"===e[0]?e:"/"+e}},{key:"baseUrl",set:function(e){"/"===e.slice(-1)&&(this._baseUrl=e.slice(0,-1)),this._baseUrl=e},get:function(){return this._baseUrl}}])&&v(t.prototype,r),n&&v(t,n),e}();t.default=m}])}));